
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://framework-x.org/docs/best-practices/controllers/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.3">
    
    
      
        <title>Controller classes - Framework X documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.edf004c2.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      <script defer data-domain="framework-x.org" src="https://plausible.io/js/script.hash.outbound-links.js"></script>

    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#controller-classes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Framework X documentation" class="md-header__button md-logo" aria-label="Framework X documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Framework X documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Controller classes
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/clue/framework-x/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    clue/framework-x
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Framework X documentation" class="md-nav__button md-logo" aria-label="Framework X documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Framework X documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/clue/framework-x/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    clue/framework-x
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quickstart/" class="md-nav__link">
        Quickstart in 5 minutes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/philosophy/" class="md-nav__link">
        Our philosophy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/community/" class="md-nav__link">
        Community
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Best Practices
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Best Practices" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Best Practices
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Controller classes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Controller classes
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#first-steps" class="md-nav__link">
    First steps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#composer-autoloading" class="md-nav__link">
    Composer autoloading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#container" class="md-nav__link">
    Container
  </a>
  
    <nav class="md-nav" aria-label="Container">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#autowiring" class="md-nav__link">
    Autowiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#container-configuration" class="md-nav__link">
    Container configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psr-11-container-interface" class="md-nav__link">
    PSR-11: Container interface
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        Production deployment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/app/" class="md-nav__link">
        App
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/middleware/" class="md-nav__link">
        Middleware
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/request/" class="md-nav__link">
        Request
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/response/" class="md-nav__link">
        Response
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Async
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Async" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Async
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../async/fibers/" class="md-nav__link">
        Fibers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../async/coroutines/" class="md-nav__link">
        Coroutines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../async/promises/" class="md-nav__link">
        Promises
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Integrations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Integrations" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Integrations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/database/" class="md-nav__link">
        Database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/filesystem/" class="md-nav__link">
        ⚠ Filesystem
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/child-processes/" class="md-nav__link">
        ⚠ Child processes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/streaming/" class="md-nav__link">
        ⚠ Streaming
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/authentication/" class="md-nav__link">
        ⚠ Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/sessions/" class="md-nav__link">
        ⚠ Sessions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/templates/" class="md-nav__link">
        ⚠ Templates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/queueing/" class="md-nav__link">
        ⚠ Queueing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#first-steps" class="md-nav__link">
    First steps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#composer-autoloading" class="md-nav__link">
    Composer autoloading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#container" class="md-nav__link">
    Container
  </a>
  
    <nav class="md-nav" aria-label="Container">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#autowiring" class="md-nav__link">
    Autowiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#container-configuration" class="md-nav__link">
    Container configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#psr-11-container-interface" class="md-nav__link">
    PSR-11: Container interface
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/clue/framework-x/edit/main/docs/best-practices/controllers.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="controller-classes">Controller classes<a class="headerlink" href="#controller-classes" title="Permanent link">&para;</a></h1>
<h2 id="first-steps">First steps<a class="headerlink" href="#first-steps" title="Permanent link">&para;</a></h2>
<p>When starting with X, it's often easiest to start with simple closure definitions like suggested in the <a href="../../getting-started/quickstart/">quickstart guide</a>.</p>
<p>As a next step, let's take a look at how this structure can be improved with controller classes.
This is especially useful once you leave the prototyping phase and want to find the best structure for a production-ready setup.</p>
<p>To get started, let's take a look at the following simple closure definitions:</p>
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">();</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">React\Http\Message\Response</span><span class="o">::</span><span class="na">plaintext</span><span class="p">(</span>
        <span class="s2">&quot;Hello wörld!</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="p">);</span>
<span class="p">});</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/users/{name}&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Psr\Http\Message\ServerRequestInterface</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">React\Http\Message\Response</span><span class="o">::</span><span class="na">plaintext</span><span class="p">(</span>
        <span class="s2">&quot;Hello &quot;</span> <span class="o">.</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;!</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="p">);</span>
<span class="p">});</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">run</span><span class="p">();</span>
</code></pre></div>
<p>While easy to get started, it's also easy to see how this will get out of hand for more complex
business domains when you have more than a couple of routes registered.</p>
<p>For real-world applications, we highly recommend structuring your application
into individual controller classes. This way, we can break up the above
definition into three even simpler files:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Using controller instances</label><label for="__tabbed_1_2">Using controller names</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">();</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Acme\Todo\HelloController</span><span class="p">());</span>
<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/users/{name}&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Acme\Todo\UserController</span><span class="p">());</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">run</span><span class="p">();</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">();</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nx">Acme\Todo\HelloController</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/users/{name}&#39;</span><span class="p">,</span> <span class="nx">Acme\Todo\UserController</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">run</span><span class="p">();</span>
</code></pre></div>
</div>
</div>
</div>
<!-- -->

<div class="highlight"><span class="filename">src/HelloController.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Acme\Todo</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">React\Http\Message\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">HelloController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__invoke</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">Response</span><span class="o">::</span><span class="na">plaintext</span><span class="p">(</span>
            <span class="s2">&quot;Hello wörld!</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><span class="filename">src/UserController.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Acme\Todo</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Psr\Http\Message\ServerRequestInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">React\Http\Message\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">UserController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__invoke</span><span class="p">(</span><span class="nx">ServerRequestInterface</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">Response</span><span class="o">::</span><span class="na">plaintext</span><span class="p">(</span>
            <span class="s2">&quot;Hello &quot;</span> <span class="o">.</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;!</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="composer-autoloading">Composer autoloading<a class="headerlink" href="#composer-autoloading" title="Permanent link">&para;</a></h2>
<p>Doesn't look too complex, right? Now, we only need to tell Composer's autoloader
about our vendor namespace <code>Acme\Todo</code> in the <code>src/</code> folder. Make sure to include
the following lines in your <code>composer.json</code> file:</p>
<div class="highlight"><span class="filename">composer.json</span><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;autoload&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;psr-4&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;Acme\\Todo\\&quot;</span><span class="p">:</span> <span class="s2">&quot;src/&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>When we're doing this the first time, we have to update Composer's generated
autoloader classes:</p>
<div class="highlight"><pre><span></span><code>$ composer dump-autoload
</code></pre></div>
<blockquote>
<p>ℹ️ <strong>New to Composer?</strong></p>
<p>Don't worry, that's a one-time setup only. If you're used to working with
Composer, this shouldn't be too surprising. If this sounds new to you, rest
assured this is the only time you have to worry about this, new classes can
simply be added without having to run Composer again.</p>
</blockquote>
<p>Again, let's see our web application still works by using your favorite
web browser or command-line tool:</p>
<div class="highlight"><pre><span></span><code>$ curl http://localhost:8080/
Hello wörld!
</code></pre></div>
<p>If everything works as expected, we can continue with writing our first tests to automate this.</p>
<h2 id="container">Container<a class="headerlink" href="#container" title="Permanent link">&para;</a></h2>
<p>X has a powerful, built-in dependency injection container (DI container or DIC).
It allows you to automatically create request handler classes and their
dependencies with zero configuration for most common use cases.</p>
<blockquote>
<p>ℹ️ <strong>Dependency Injection (DI)</strong></p>
<p>Dependency injection (DI) is a technique in which an object receives other
objects that it depends on, rather than creating these dependencies within its
class. In its most basic form, this means creating all required object
dependencies upfront and manually injecting them into the controller class.
This can be done manually or you can use the optional container which does
this for you.</p>
</blockquote>
<h3 id="autowiring">Autowiring<a class="headerlink" href="#autowiring" title="Permanent link">&para;</a></h3>
<p>To use autowiring, simply pass in the class name of your request handler classes
like this:</p>
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">();</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nx">Acme\Todo\HelloController</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/users/{name}&#39;</span><span class="p">,</span> <span class="nx">Acme\Todo\UserController</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">run</span><span class="p">();</span>
</code></pre></div>
<p>X will automatically take care of instantiating the required request handler
classes and their dependencies when a request comes in. This autowiring feature
covers most common use cases:</p>
<ul>
<li>Names always reference existing class names.</li>
<li>Class names need to be loadable through the autoloader. See
  <a href="#composer-autoloading">composer autoloading</a> above.</li>
<li>Each class may or may not have a constructor.</li>
<li>If the constructor has an optional argument, it will be omitted unless an
  explicit <a href="#container-configuration">container configuration</a> is used.</li>
<li>If the constructor has a nullable argument, it will be given a <code>null</code> value
  unless an explicit <a href="#container-configuration">container configuration</a> is used.</li>
<li>If the constructor references another class, it will load this class next.</li>
</ul>
<p>This covers most common use cases where the request handler class uses a
constructor with type definitions to explicitly reference other classes.</p>
<h3 id="container-configuration">Container configuration<a class="headerlink" href="#container-configuration" title="Permanent link">&para;</a></h3>
<p>Autowiring should cover most common use cases with zero configuration. If you
want to have more control over this behavior, you may also explicitly configure
the dependency injection container like this:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Arrow functions (PHP 7.4+)</label><label for="__tabbed_2_2">Closure</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$container</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\Container</span><span class="p">([</span>
    <span class="nx">Acme\Todo\HelloController</span><span class="o">::</span><span class="na">class</span> <span class="o">=&gt;</span> <span class="nx">fn</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">Acme\Todo\HelloController</span><span class="p">()</span>
<span class="p">]);</span>



<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">(</span><span class="nv">$container</span><span class="p">);</span>

<span class="c1">// …</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$container</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\Container</span><span class="p">([</span>
    <span class="nx">Acme\Todo\HelloController</span><span class="o">::</span><span class="na">class</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Acme\Todo\HelloController</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">]);</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">(</span><span class="nv">$container</span><span class="p">);</span>

<span class="c1">// …</span>
</code></pre></div>
</div>
</div>
</div>
<p>This can be useful in these cases:</p>
<ul>
<li>Constructor parameter references an interface and you want to explicitly
  define an instance that implements this interface.</li>
<li>Constructor parameter has a primitive type (scalars such as <code>int</code> or <code>string</code>
  etc.) or has no type at all and you want to explicitly bind a given value.</li>
<li>Constructor parameter references a class, but you want to inject a specific
  instance or subclass in place of a default class.</li>
</ul>
<p>The configured container instance can be passed into the application like any
other middleware request handler. In most cases this means you create a single
<code>Container</code> instance with a number of factory functions and pass this instance as
the first argument to the <code>App</code>.</p>
<p>In its most common form, each entry in the container configuration maps a class
name to a factory function that will be invoked when this class is first
requested. The factory function is responsible for returning an instance that
implements the given class name.</p>
<p>Factory functions used in the container configuration map may reference other
classes that will automatically be injected from the container. This can be
particularly useful when combining autowiring with some manual configuration
like this:</p>
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$container</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\Container</span><span class="p">([</span>
    <span class="nx">Acme\Todo\UserController</span><span class="o">::</span><span class="na">class</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">(</span><span class="nx">React\Http\Browser</span> <span class="nv">$browser</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// example UserController class requires two arguments:</span>
        <span class="c1">// - first argument will be autowired based on class reference</span>
        <span class="c1">// - second argument expects some manual value</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Acme\Todo\UserController</span><span class="p">(</span><span class="nv">$browser</span><span class="p">,</span> <span class="mi">42</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">]);</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">(</span><span class="nv">$container</span><span class="p">);</span>

<span class="c1">// …</span>
</code></pre></div>
<p>Factory functions used in the container configuration map may also reference
variables defined in the container configuration. You may use any object or
scalar or <code>null</code> value for container variables or factory functions that return
any such value. This can be particularly useful when combining autowiring with
some manual configuration like this:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:3"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Scalar values</label><label for="__tabbed_3_2">Default values</label><label for="__tabbed_3_3">Nullable values</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$container</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\Container</span><span class="p">([</span>
    <span class="nx">Acme\Todo\UserController</span><span class="o">::</span><span class="na">class</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">(</span><span class="nx">bool</span> <span class="nv">$debug</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$hostname</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// example UserController class uses two container variables</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Acme\Todo\UserController</span><span class="p">(</span><span class="nv">$debug</span><span class="p">,</span> <span class="nv">$hostname</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s1">&#39;debug&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
    <span class="s1">&#39;hostname&#39;</span> <span class="o">=&gt;</span> <span class="nx">fn</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span> <span class="o">=&gt;</span> <span class="nb">gethostname</span><span class="p">()</span>
<span class="p">]);</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">(</span><span class="nv">$container</span><span class="p">);</span>

<span class="c1">// …</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$container</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\Container</span><span class="p">([</span>
    <span class="nx">Acme\Todo\UserController</span><span class="o">::</span><span class="na">class</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">(</span><span class="nx">bool</span> <span class="nv">$debug</span> <span class="o">=</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// example UserController class uses $debug, apply default if not set</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Acme\Todo\UserController</span><span class="p">(</span><span class="nv">$debug</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s1">&#39;debug&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>
<span class="p">]);</span>


<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">(</span><span class="nv">$container</span><span class="p">);</span>

<span class="c1">// …</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$container</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\Container</span><span class="p">([</span>
    <span class="nx">Acme\Todo\UserController</span><span class="o">::</span><span class="na">class</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">(</span><span class="o">?</span><span class="nx">string</span> <span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// example UserController class uses $name, defaults to null if not set</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Acme\Todo\UserController</span><span class="p">(</span><span class="nv">$name</span> <span class="o">??</span> <span class="s1">&#39;ACME&#39;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Demo&#39;</span>
<span class="p">]);</span>


<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">(</span><span class="nv">$container</span><span class="p">);</span>

<span class="c1">// …</span>
</code></pre></div>
</div>
</div>
</div>
<blockquote>
<p>ℹ️ <strong>Avoiding name collisions</strong></p>
<p>Note that class names and container variables share the same container
configuration map and as such might be subject to name collisions as a single
entry may only have a single value. For this reason, container variables will
only be used for container functions by default. We highly recommend using
namespaced class names like in the previous example. You may also want to make
sure that container variables use unique names prefixed with your vendor name.</p>
</blockquote>
<p>All environment variables will be made available as container variables
automatically. You can access their values simply by referencing variables in
all uppercase in any factory function like this:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Required environment variables</label><label for="__tabbed_4_2">Optional environment variables</label><label for="__tabbed_4_3">Built-in environment variables</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$container</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\Container</span><span class="p">([</span>
    <span class="nx">React\MySQL\ConnectionInterface</span><span class="o">::</span><span class="na">class</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">(</span><span class="nx">string</span> <span class="nv">$MYSQL_URI</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// connect to database defined in required $MYSQL_URI environment variable</span>
        <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">React\MySQL\Factory</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">createLazyConnection</span><span class="p">(</span><span class="nv">$MYSQL_URI</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">]);</span>


<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">(</span><span class="nv">$container</span><span class="p">);</span>

<span class="c1">// …</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$container</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\Container</span><span class="p">([</span>
    <span class="nx">React\MySQL\ConnectionInterface</span><span class="o">::</span><span class="na">class</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">(</span><span class="nx">string</span> <span class="nv">$DB_HOST</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$DB_USER</span> <span class="o">=</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$DB_PASS</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$DB_NAME</span> <span class="o">=</span> <span class="s1">&#39;acme&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// connect to database defined in optional $DB_* environment variables</span>
        <span class="nv">$uri</span> <span class="o">=</span> <span class="s1">&#39;mysql://&#39;</span> <span class="o">.</span> <span class="nv">$DB_USER</span> <span class="o">.</span> <span class="s1">&#39;:&#39;</span> <span class="o">.</span> <span class="nb">rawurlencode</span><span class="p">(</span><span class="nv">$DB_PASS</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;@&#39;</span> <span class="o">.</span> <span class="nv">$DB_HOST</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$DB_NAME</span><span class="p">;</span>
        <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">React\MySQL\Factory</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">createLazyConnection</span><span class="p">(</span><span class="nv">$uri</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">]);</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">(</span><span class="nv">$container</span><span class="p">);</span>

<span class="c1">// …</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$container</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\Container</span><span class="p">([</span>
    <span class="c1">// Framework X also uses environment variables internally.</span>
    <span class="c1">// You may explicitly configure this built-in functionality like this:</span>
    <span class="c1">// &#39;X_LISTEN&#39; =&gt; &#39;0.0.0.0:8081&#39;</span>
    <span class="c1">// &#39;X_LISTEN&#39; =&gt; fn(?string $PORT = &#39;8080&#39;) =&gt; &#39;0.0.0.0:&#39; . $PORT</span>
    <span class="s1">&#39;X_LISTEN&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;127.0.0.1:8080&#39;</span>
<span class="p">]);</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">(</span><span class="nv">$container</span><span class="p">);</span>

<span class="c1">// …</span>
</code></pre></div>
</div>
</div>
</div>
<blockquote>
<p>ℹ️ <strong>Passing environment variables</strong></p>
<p>All environment variables defined on the process level will be made available
automatically. For temporary testing purposes, you may explicitly <code>export</code> or
prefix environment variables to the command line. As a more permanent
solution, you may want to save your environment variables in your
<a href="../deployment/#systemd">systemd configuration</a>, <a href="../deployment/#docker-containers">Docker settings</a>,
or load your variables from a dotenv file (<code>.env</code>) using a library such as
<a href="https://github.com/vlucas/phpdotenv">vlucas/phpdotenv</a>.</p>
</blockquote>
<p>The container configuration may also be used to map a class name to a different
class name that implements the same interface, either by mapping between two
class names or using a factory function that returns a class name. This is
particularly useful when implementing an interface.</p>
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="nv">$container</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\Container</span><span class="p">([</span>
    <span class="nx">React\Cache\CacheInterface</span><span class="o">::</span><span class="na">class</span> <span class="o">=&gt;</span> <span class="nx">React\Cache\ArrayCache</span><span class="o">::</span><span class="na">class</span><span class="p">,</span>
    <span class="nx">Psr\Http\Message\ResponseInterface</span><span class="o">::</span><span class="na">class</span> <span class="o">=&gt;</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// returns class implementing interface from factory function</span>
        <span class="k">return</span> <span class="nx">React\Http\Message\Response</span><span class="o">::</span><span class="na">class</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">]);</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">(</span><span class="nv">$container</span><span class="p">);</span>

<span class="c1">// …</span>
</code></pre></div>
<h3 id="psr-11-container-interface">PSR-11: Container interface<a class="headerlink" href="#psr-11-container-interface" title="Permanent link">&para;</a></h3>
<p>X has a powerful, built-in dependency injection container (DI container or DIC)
that has a strong focus on simplicity and should cover most common use cases.
Sometimes, you might need a little more control over this and may want to use a
custom container implementation instead.</p>
<p>We love standards and interoperability, that's why we support the
<a href="https://www.php-fig.org/psr/psr-11/">PSR-11: Container interface</a>. This is a
common interface that is used by most DI containers in PHP. In the following
example, we're using <a href="https://php-di.org/">PHP-DI</a>, but you may likewise use any
other implementation of this interface:</p>
<div class="highlight"><pre><span></span><code>composer require php-di/php-di
</code></pre></div>
<p>In order to use an external DI container, you first have to instantiate your
custom container as per its documentation. If this instance implements the
<code>Psr\Container\ContainerInterface</code>, you can then pass it into the X container that
acts as an adapter for the application like this:</p>
<div class="highlight"><span class="filename">public/index.php</span><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>

<span class="c1">// $builder = new DI\ContainerBuilder();</span>
<span class="c1">// $builder-&gt;…</span>
<span class="c1">// $container = $builder-&gt;build();</span>
<span class="nv">$container</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DI\Container</span><span class="p">();</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FrameworkX\App</span><span class="p">(</span><span class="k">new</span> <span class="nx">FrameworkX\Container</span><span class="p">(</span><span class="nv">$container</span><span class="p">));</span>

<span class="c1">// …</span>
</code></pre></div>
<p>We expect most applications to work just fine with the built-in DI container.
If you need to use a custom container, the above logic should work with any of the
<a href="https://packagist.org/providers/psr/container-implementation">PSR-11 container implementations</a>.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../getting-started/community/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Community" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Community
            </div>
          </div>
        </a>
      
      
        
        <a href="../testing/" class="md-footer__link md-footer__link--next" aria-label="Next: Testing" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Testing
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.0bbba5b5.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.e1a181d9.min.js"></script>
      
    
  </body>
</html>